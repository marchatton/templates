#!/usr/bin/env bash
# Pre-push hook template
# Runs pnpm test/build if available, otherwise silently passes.
# Edit this file to enable/customize checks.

set -e

# Only run if package.json exists
if [ ! -f "package.json" ]; then
  exit 0
fi

# Check if pnpm is available
if ! command -v pnpm &> /dev/null; then
  exit 0
fi

# Run typecheck if script exists (silent if not)
if pnpm run --silent typecheck --help &> /dev/null 2>&1; then
  pnpm run --silent typecheck || exit 1
fi

# Run test if script exists (silent if not)
if pnpm run --silent test --help &> /dev/null 2>&1; then
  pnpm run --silent test || exit 1
fi

exit 0
